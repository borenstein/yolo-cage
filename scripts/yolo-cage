#!/usr/bin/env python3
"""yolo-cage CLI wrapper.

This script provides the yolo-cage command by:
1. Using the built zipapp (dist/yolo-cage) if available
2. Otherwise running the yolo_cage package directly

For development, run from the repo root to use the package directly.
For production, install the zipapp to /usr/local/bin/yolo-cage.
"""

import os
import sys
from pathlib import Path

def main():
    # Find repo root (where this script lives is scripts/, parent is repo root)
    script_dir = Path(__file__).resolve().parent
    repo_root = script_dir.parent

    # Check for built zipapp
    zipapp = repo_root / "dist" / "yolo-cage"
    if zipapp.exists():
        os.execv(sys.executable, [sys.executable, str(zipapp)] + sys.argv[1:])

    # Fall back to running package directly
    package_dir = repo_root / "yolo_cage"
    if package_dir.exists():
        sys.path.insert(0, str(repo_root))
        from yolo_cage.cli import main as cli_main
        cli_main()
    else:
        print("Error: yolo_cage package not found. Run from repo root or build zipapp.", file=sys.stderr)
        sys.exit(1)

if __name__ == "__main__":
    main()
